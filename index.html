<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Kalkulatory finansowe: podatek Belki, oszczędności i raty kredytu." />
  <title>Kalkulatory Finansowe</title>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/810/810092.png" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f8;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #0077cc;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    .main-layout {
      display: flex;
      padding: 1rem;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .left-panel, .right-panel {
      flex: 1;
      min-width: 300px;
    }
    .calculator {
      background: white;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    label, input {
      display: block;
      width: 100%;
      margin-bottom: 0.5rem;
    }
    input {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background: #0077cc;
      color: white;
      padding: 0.6rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 0.5rem;
    }
    button:hover {
      background: #005fa3;
    }
    .result {
      margin-top: 1rem;
      font-weight: bold;
    }
    .right-panel {
      position: sticky;
      top: 20px;
    }
    canvas {
      margin-top: 1rem;
      background: white;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <header>
    <h1>Kalkulatory Finansowe</h1>
  </header>
  <div class="main-layout">
    <div class="left-panel">
      <!-- Kalkulator podatku Belki -->
      <div class="calculator">
        <h2>Podatek Belki</h2>
        <label>Kwota: <input type="number" id="kwota" required min="1" /></label>
        <label>Oprocentowanie (%): <input type="number" id="oprocentowanie" required min="0" /></label>
        <label>Czas (lata): <input type="number" id="czas" required min="1" /></label>
        <button onclick="obliczBelke()">Oblicz</button>
        <div class="result" id="wynik-belki"></div>
      </div>

      <!-- Kalkulator oszczędności -->
      <div class="calculator">
        <h2>Oszczędności</h2>
        <label>Miesięczna wpłata: <input type="number" id="miesieczna-wplata" /></label>
        <label>Oprocentowanie (%): <input type="number" id="oprocentowanie-oszczednosci" /></label>
        <label>Czas (miesiące): <input type="number" id="okres" /></label>
        <button onclick="obliczOszczednosci()">Oblicz</button>
        <div class="result" id="wynik-oszczednosci"></div>
      </div>

      <!-- Kalkulator kredytu -->
      <div class="calculator">
        <h2>Rata Kredytu</h2>
        <label>Kwota kredytu: <input type="number" id="kredyt-kwota" /></label>
        <label>Oprocentowanie (%): <input type="number" id="kredyt-oprocentowanie" /></label>
        <label>Czas (lata): <input type="number" id="kredyt-lata" /></label>
        <button onclick="obliczRate()">Oblicz</button>
        <div class="result" id="wynik-kredytu"></div>
        <canvas id="wykresKredytu" width="400" height="200"></canvas>
      </div>
    </div>

    <!-- Panel ofert -->
    <div class="right-panel">
      <div class="calculator">
        <h2>Oferty Finansowe</h2>
        <ul>
          <li>Konto Oszczędnościowe 7% – Bank X</li>
          <li>Kredyt Hipoteczny 5,5% – Bank Y</li>
          <li>Lokata 6% – Bank Z</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    // Podatek Belki
    function obliczBelke() {
      const kwota = parseFloat(document.getElementById('kwota').value);
      const oprocentowanie = parseFloat(document.getElementById('oprocentowanie').value);
      const czas = parseFloat(document.getElementById('czas').value);

      const zyskBrutto = kwota * Math.pow(1 + (oprocentowanie / 100), czas) - kwota;
      const podatek = zyskBrutto * 0.19;
      const zyskNetto = zyskBrutto - podatek;

      document.getElementById('wynik-belki').innerText = 
        `Zysk netto: ${zyskNetto.toFixed(2)} PLN (podatek: ${podatek.toFixed(2)} PLN)`;

      localStorage.setItem('kwota', kwota);
      localStorage.setItem('oprocentowanie', oprocentowanie);
      localStorage.setItem('czas', czas);
    }

    // Oszczędności
    function obliczOszczednosci() {
      const miesiecznaWplata = parseFloat(document.getElementById('miesieczna-wplata').value);
      const oprocentowanie = parseFloat(document.getElementById('oprocentowanie-oszczednosci').value);
      const okres = parseInt(document.getElementById('okres').value);

      let saldo = 0;
      for (let i = 0; i < okres; i++) {
        saldo += miesiecznaWplata;
        saldo *= 1 + (oprocentowanie / 100 / 12);
      }

      const lacznaWplata = miesiecznaWplata * okres;
      const zysk = saldo - lacznaWplata;

      document.getElementById('wynik-oszczednosci').innerHTML = 
        `Oszczędności po ${okres} miesiącach: ${saldo.toFixed(2)} PLN<br/>
         Łączna wpłata: ${lacznaWplata.toFixed(2)} PLN<br/>
         Zysk: ${zysk.toFixed(2)} PLN`;
    }

    // Rata kredytu i wykres
    function obliczRate() {
      const kwota = parseFloat(document.getElementById('kredyt-kwota').value);
      const oprocentowanie = parseFloat(document.getElementById('kredyt-oprocentowanie').value) / 100 / 12;
      const miesiace = parseInt(document.getElementById('kredyt-lata').value) * 12;

      const rata = (kwota * oprocentowanie) / (1 - Math.pow(1 + oprocentowanie, -miesiace));
      const calkowitaKwota = rata * miesiace;

      document.getElementById('wynik-kredytu').innerText = 
        `Miesięczna rata: ${rata.toFixed(2)} PLN, Łącznie do spłaty: ${calkowitaKwota.toFixed(2)} PLN`;

      // Wykres
      const labels = Array.from({ length: miesiace }, (_, i) => i + 1);
      const dane = labels.map(() => rata.toFixed(2));
      const ctx = document.getElementById('wykresKredytu').getContext('2d');

      if (window.kredytChart) {
        window.kredytChart.destroy();
      }

      window.kredytChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: 'Miesięczna rata (PLN)',
            data: dane,
            borderColor: '#0077cc',
            backgroundColor: 'rgba(0, 119, 204, 0.1)',
            tension: 0.2
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            title: { display: true, text: 'Symulacja spłat rat kredytu' }
          },
          scales: {
            x: { title: { display: true, text: 'Numer raty' } },
            y: { title: { display: true, text: 'Kwota (PLN)' } }
          }
        }
      });
    }

    // Przywracanie danych z localStorage
    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('kwota').value = localStorage.getItem('kwota') || '';
      document.getElementById('oprocentowanie').value = localStorage.getItem('oprocentowanie') || '';
      document.getElementById('czas').value = localStorage.getItem('czas') || '';
    });
  </script>
</body>
</html>
